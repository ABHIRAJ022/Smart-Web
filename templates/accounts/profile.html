{% extends 'base.html' %}

{% block content %}
<style>
    /* Entrance Animation */
    .fade-in-up {
        animation: slideUpFade 0.6s ease-out forwards;
        opacity: 0;
        transform: translateY(20px);
    }
    @keyframes slideUpFade {
        to { opacity: 1; transform: translateY(0); }
    }

    /* Modern Profile Card */
    .profile-glass-card {
        background: #ffffff;
        border: none;
        border-radius: 1.5rem;
        box-shadow: 0 20px 40px rgba(0,0,0,0.04);
        overflow: hidden;
    }

    /* Soft Header Section */
    .profile-header {
        background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        padding: 2.5rem 2rem 1.5rem;
        text-align: center;
        border-bottom: 1px solid #f1f5f9;
        position: relative;
    }
    
    .profile-avatar {
        width: 80px;
        height: 80px;
        background: #ffffff;
        color: #16a34a;
        border-radius: 50%;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 2.25rem;
        box-shadow: 0 8px 16px rgba(22, 163, 74, 0.12);
        margin-bottom: 1rem;
    }

    /* Info Rows */
    .info-list {
        padding: 1rem 2rem;
    }
    .info-row {
        display: flex;
        align-items: center;
        padding: 1.25rem 0;
        border-bottom: 1px solid #f1f5f9;
    }
    .info-row:last-child {
        border-bottom: none;
    }
    
    .info-icon-box {
        width: 48px;
        height: 48px;
        border-radius: 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 1.25rem;
        font-size: 1.25rem;
        flex-shrink: 0;
    }

    /* Specific Icon Colors */
    .bg-blue-soft { background: #eff6ff; color: #3b82f6; }
    .bg-purple-soft { background: #faf5ff; color: #a855f7; }
    .bg-orange-soft { background: #fff7ed; color: #f97316; }
    .bg-slate-soft { background: #f8fafc; color: #64748b; }
    .bg-sky-soft { background: #f0f9ff; color: #0ea5e9; }

    /* Typography */
    .info-label {
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: #94a3b8;
        font-weight: 700;
        margin-bottom: 0.2rem;
    }
    .info-value {
        font-size: 1.05rem;
        font-weight: 600;
        color: #334155;
        margin: 0;
    }

    /* Action Footer */
    .profile-actions {
        padding: 1.5rem 2rem;
        background: #fafaf9; /* Very subtle warm gray */
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-top: 1px solid #f1f5f9;
    }

    /* Buttons */
    .btn-ghost-secondary {
        color: #64748b;
        background: #f1f5f9;
        border: none;
        border-radius: 0.75rem;
        font-weight: 600;
        padding: 0.6rem 1.25rem;
        transition: all 0.2s;
    }
    .btn-ghost-secondary:hover {
        background: #e2e8f0;
        color: #475569;
    }

    .btn-danger-premium {
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        color: #fff;
        border: none;
        border-radius: 0.75rem;
        font-weight: 600;
        padding: 0.6rem 1.25rem;
        box-shadow: 0 4px 10px rgba(239, 68, 68, 0.2);
        transition: all 0.2s;
    }
    .btn-danger-premium:hover {
        transform: translateY(-1px);
        box-shadow: 0 6px 14px rgba(239, 68, 68, 0.3);
        color: #fff;
    }
</style>

<div class="row justify-content-center align-items-center mb-5 fade-in-up">
    <div class="col-md-8 col-lg-6">
        <div class="profile-glass-card mt-4">
            
            <div class="profile-header">
                <div class="profile-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <h4 class="fw-bold text-dark mb-1">My Profile</h4>
                <p class="text-muted small mb-0">Manage your Smart Health account details</p>
            </div>

            <div class="info-list">
                
                <div class="info-row">
                    <div class="info-icon-box bg-blue-soft">
                        <i class="fas fa-id-badge"></i>
                    </div>
                    <div>
                        <div class="info-label">Username</div>
                        <div class="info-value">{{ user.username }}</div>
                    </div>
                </div>

                <div class="info-row">
                    <div class="info-icon-box bg-purple-soft">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <div>
                        <div class="info-label">Email Address</div>
                        <div class="info-value">{{ user.email }}</div>
                    </div>
                </div>

                <div class="info-row">
                    <div class="info-icon-box bg-orange-soft">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <div>
                        <div class="info-label">Account Role</div>
                        <div class="info-value">{{ user.get_role_display }}</div>
                    </div>
                </div>

                <div class="info-row">
                    <div class="info-icon-box bg-slate-soft">
                        <i class="fas fa-phone"></i>
                    </div>
                    <div>
                        <div class="info-label">Phone Number</div>
                        <div class="info-value">{{ user.phone|default:"Not Provided" }}</div>
                    </div>
                </div>

                {% if user.role == 'patient' %}
                <div class="info-row">
                    <div class="info-icon-box bg-sky-soft">
                        <i class="fas fa-satellite-dish"></i>
                    </div>
                    <div>
                        <div class="info-label">ThingSpeak Channel ID</div>
                        <div class="info-value font-monospace text-primary">{{ user.thingspeak_channel_id|default:"Not Configured" }}</div>
                    </div>
                </div>
                {% endif %}

            </div>

            <div class="profile-actions flex-column flex-sm-row gap-3">
                <a href="/" class="btn btn-ghost-secondary w-100 w-sm-auto text-center">
                    <i class="fas fa-arrow-left me-2"></i> Back to Dashboard
                </a>
                
                <form method="post" action="{% url 'delete_account' %}" class="m-0 w-100 w-sm-auto text-center" onsubmit="return confirm('Are you sure you want to delete your account? This action is permanent and cannot be undone.');">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger-premium w-100">
                        <i class="fas fa-trash-alt me-2"></i> Delete Account
                    </button>
                </form>
            </div>

        </div>
    </div>
</div>
{% endblock %}